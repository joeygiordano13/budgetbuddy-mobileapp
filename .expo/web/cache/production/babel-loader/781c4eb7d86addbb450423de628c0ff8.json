{"ast":null,"code":"import _regeneratorRuntime from\"@babel/runtime/regenerator\";import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _inherits from\"@babel/runtime/helpers/inherits\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true;}catch(e){return false;}}import React,{useState}from'react';import{Center}from\"../components/Center\";import SafeAreaView from\"react-native-web/dist/exports/SafeAreaView\";import Text from\"react-native-web/dist/exports/Text\";import Button from\"react-native-web/dist/exports/Button\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import TouchableWithoutFeedback from\"react-native-web/dist/exports/TouchableWithoutFeedback\";import View from\"react-native-web/dist/exports/View\";import ScrollView from\"react-native-web/dist/exports/ScrollView\";import TextInput from\"react-native-web/dist/exports/TextInput\";import{LogoutButton}from\"../components/LogoutButton\";import AsyncStorage from'@react-native-async-storage/async-storage';import{buildPath}from\"../functions/BuildPath\";import{FontAwesome}from'@expo/vector-icons';var Budgets=function(_React$PureComponent){_inherits(Budgets,_React$PureComponent);var _super=_createSuper(Budgets);function Budgets(props){var _this;_classCallCheck(this,Budgets);_this=_super.call(this,props);_this.state={budgets:[],show:false,currentBudget:-1,rerender:false,changeAllowance:false,manage:false,budgetName:'',budgetGoal:-1,budgetProgress:-1};return _this;}_createClass(Budgets,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var obj,js;return _regeneratorRuntime.async(function componentDidMount$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _regeneratorRuntime.awrap(AsyncStorage.getItem(\"email\"));case 2:_context.t0=_context.sent;obj={email:_context.t0};js=JSON.stringify(obj);_context.t1=Promise;_context.t2=fetch;_context.t3=buildPath('api/showAllBudgets');_context.t4=js;_context.next=11;return _regeneratorRuntime.awrap(AsyncStorage.getItem(\"token\"));case 11:_context.t5=_context.sent;_context.t6='Bearer '+_context.t5;_context.t7={'Content-Type':'application/json','Authorization':_context.t6};_context.t8={method:'POST',body:_context.t4,headers:_context.t7};_context.t9=(0,_context.t2)(_context.t3,_context.t8);_context.t10=fetch(buildPath('api/getAllowance'),{method:'POST',body:js,headers:{'Content-Type':'application/json'}});_context.t11=[_context.t9,_context.t10];_context.t1.all.call(_context.t1,_context.t11).then(function(_ref){var _ref2=_slicedToArray(_ref,2),res1=_ref2[0],res2=_ref2[1];return Promise.all([res1.json(),res2.json()]);}).then(function(_ref3){var _ref4=_slicedToArray(_ref3,2),res1=_ref4[0],res2=_ref4[1];var total=0;for(var i=0;i<res1.results.length;i++){total+=res1.results[i].BudgetGoal-res1.results[i].BudgetProgress;}_this2.setState({budgets:res1.results,allowance:res2.allowance,diff:0,index:-1,total:total});});case 19:case\"end\":return _context.stop();}}},null,null,null,Promise);}},{key:\"render\",value:function render(){var _this3=this;var _this$state=this.state,budgets=_this$state.budgets,show=_this$state.show,manage=_this$state.manage,currentBudget=_this$state.currentBudget,budgetName=_this$state.budgetName,budgetGoal=_this$state.budgetGoal,budgetProgress=_this$state.budgetProgress,allowance=_this$state.allowance,diff=_this$state.diff,index=_this$state.index,total=_this$state.total;var newName='',newGoal='';var handleClose=function handleClose(){return _this3.setState({show:false});};var handleShow=function handleShow(event){var index;return _regeneratorRuntime.async(function handleShow$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:event.preventDefault();index=event.currentTarget.getAttribute(\"data-id\");_this3.setState({show:true,currentBudget:index,name:budgets[index].name});case 3:case\"end\":return _context2.stop();}}},null,null,null,Promise);};var addBudget=function addBudget(event){var prog,userEmail,obj,js,js2;return _regeneratorRuntime.async(function addBudget$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:event.preventDefault();if(!budgetProgress)prog=0;else prog=parseInt(budgetProgress);if(!(prog>allowance)){_context3.next=5;break;}Alert.alert(\"You do not have enough allowance to add that much progress\");return _context3.abrupt(\"return\");case 5:_context3.next=7;return _regeneratorRuntime.awrap(AsyncStorage.getItem(\"email\"));case 7:userEmail=_context3.sent;obj={email:userEmail,BudgetName:budgetName,BudgetGoal:budgetGoal,BudgetProgress:budgetProgress};js=JSON.stringify(obj);js2=JSON.stringify({email:userEmail,funds:parseInt(allowance)-prog});_context3.prev=11;_context3.t0=Promise;_context3.t1=fetch;_context3.t2=buildPath('api/addbudget');_context3.t3=js;_context3.next=18;return _regeneratorRuntime.awrap(AsyncStorage.getItem(\"token\"));case 18:_context3.t4=_context3.sent;_context3.t5='Bearer '+_context3.t4;_context3.t6={'Content-Type':'application/json','Authorization':_context3.t5};_context3.t7={method:'POST',body:_context3.t3,headers:_context3.t6};_context3.t8=(0,_context3.t1)(_context3.t2,_context3.t7);_context3.t9=fetch(buildPath('api/addAllowance'),{method:'POST',body:js2,headers:{'Content-Type':'application/json'}});_context3.t10=[_context3.t8,_context3.t9];_context3.t0.all.call(_context3.t0,_context3.t10).then(function(_ref5){var _ref6=_slicedToArray(_ref5,2),res1=_ref6[0],res2=_ref6[1];return Promise.all([res1.json(),res2.json()]);}).then(function(_ref7){var _ref8=_slicedToArray(_ref7,2),res1=_ref8[0],res2=_ref8[1];_this3.setState({manage:false});});_context3.next=31;break;case 28:_context3.prev=28;_context3.t11=_context3[\"catch\"](11);console.log(_context3.t11.toString());case 31:case\"end\":return _context3.stop();}}},null,null,[[11,28]],Promise);};var remove=function remove(event){handleClose();confirmAlert({title:'Confirm to delete',message:'Are you sure you want to delete this budget?',buttons:[{label:'Yes',onClick:function onClick(){return deleteBudget();}},{label:'No',onClick:function onClick(){return _this3.setState({show:true,currentBudget:event.currentTarget.getAttribute(\"data-id\")});}}]});};var updateBudget=function updateBudget(event){var obj,js,response,txt,res;return _regeneratorRuntime.async(function updateBudget$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:event.preventDefault();obj={BudgetName:newName,BudgetGoal:newGoal,_id:event.currentTarget.getAttribute(\"data-id\")};js=JSON.stringify(obj);_context4.prev=3;_context4.t0=_regeneratorRuntime;_context4.t1=fetch;_context4.t2=buildPath('api/updatebudget');_context4.t3=js;_context4.next=10;return _regeneratorRuntime.awrap(AsyncStorage.getItem(\"token\"));case 10:_context4.t4=_context4.sent;_context4.t5='Bearer '+_context4.t4;_context4.t6={'Content-Type':'application/json','Authorization':_context4.t5};_context4.t7={method:'POST',body:_context4.t3,headers:_context4.t6};_context4.t8=(0,_context4.t1)(_context4.t2,_context4.t7);_context4.next=17;return _context4.t0.awrap.call(_context4.t0,_context4.t8);case 17:response=_context4.sent;_context4.next=20;return _regeneratorRuntime.awrap(response.text());case 20:txt=_context4.sent;res=JSON.parse(txt);if(res.error.length>0){Alert.alert(\"API Error:\"+res.error);}else{_this3.setState({index:-1});_this3.setState({manage:false});}_context4.next=28;break;case 25:_context4.prev=25;_context4.t9=_context4[\"catch\"](3);Alert.alert(_context4.t9.toString());case 28:case\"end\":return _context4.stop();}}},null,null,[[3,25]],Promise);};var addProgress=function addProgress(event){var index,obj,js,obj2,js2;return _regeneratorRuntime.async(function addProgress$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:event.preventDefault();if(!(allowance+diff<0)){_context5.next=4;break;}Alert.alert(\"You can't save your progress as you have a negative allowance.\");return _context5.abrupt(\"return\");case 4:index=event.currentTarget.getAttribute(\"data-index\");_context5.next=7;return _regeneratorRuntime.awrap(AsyncStorage.getItem(\"email\"));case 7:_context5.t0=_context5.sent;_context5.t1=parseInt(allowance+diff);obj={email:_context5.t0,funds:_context5.t1};js=JSON.stringify(obj);obj2={newAmount:budgets[index].BudgetProgress,_id:event.currentTarget.getAttribute(\"data-id\")};js2=JSON.stringify(obj2);_context5.prev=13;_context5.t2=Promise;_context5.t3=fetch;_context5.t4=buildPath('api/addAllowance');_context5.t5=js;_context5.next=20;return _regeneratorRuntime.awrap(AsyncStorage.getItem(\"token\"));case 20:_context5.t6=_context5.sent;_context5.t7='Bearer '+_context5.t6;_context5.t8={'Content-Type':'application/json','Authorization':_context5.t7};_context5.t9={method:'POST',body:_context5.t5,headers:_context5.t8};_context5.t10=(0,_context5.t3)(_context5.t4,_context5.t9);_context5.t11=fetch;_context5.t12=buildPath('api/addprogress');_context5.t13=js2;_context5.next=30;return _regeneratorRuntime.awrap(AsyncStorage.getItem(\"token\"));case 30:_context5.t14=_context5.sent;_context5.t15='Bearer '+_context5.t14;_context5.t16={'Content-Type':'application/json','Authorization':_context5.t15};_context5.t17={method:'POST',body:_context5.t13,headers:_context5.t16};_context5.t18=(0,_context5.t11)(_context5.t12,_context5.t17);_context5.t19=[_context5.t10,_context5.t18];_context5.t2.all.call(_context5.t2,_context5.t19).then(function(_ref9){var _ref10=_slicedToArray(_ref9,2),res1=_ref10[0],res2=_ref10[1];return Promise.all([res1.json(),res2.json()]);}).then(function(_ref11){var _ref12=_slicedToArray(_ref11,2),res1=_ref12[0],res2=_ref12[1];_this3.setState({index:-1});_this3.setState({manage:false});});_context5.next=42;break;case 39:_context5.prev=39;_context5.t20=_context5[\"catch\"](13);alert(_context5.t20.toString()+\"yee\");case 42:case\"end\":return _context5.stop();}}},null,null,[[13,39]],Promise);};if(!manage){return React.createElement(SafeAreaView,{style:styles.container},React.createElement(Center,null,React.createElement(TouchableWithoutFeedback,{onPress:function onPress(){return _this3.setState({manage:true});}},React.createElement(View,{style:styles.newBudgetButton},React.createElement(Text,{style:styles.medium},React.createElement(FontAwesome,{name:\"plus\",size:24,color:\"black\"}),\"Add new Budgets\"))),React.createElement(ScrollView,null,budgets.map(function(budget,i){return React.createElement(SafeAreaView,{style:styles.top},React.createElement(Text,{style:styles.medium},budget.BudgetName),React.createElement(SafeAreaView,{style:styles.inner},React.createElement(Text,{style:styles.small},\"$\",budget.BudgetGoal)),React.createElement(SafeAreaView,{style:styles.inner},React.createElement(Text,{style:styles.small},\"$\",budget.BudgetProgress)));})),React.createElement(LogoutButton,null)));}return React.createElement(SafeAreaView,{style:styles.container},React.createElement(Center,null,React.createElement(SafeAreaView,{style:styles.newBudgetHeader},React.createElement(Text,{style:styles.nBHeader},\"Add New Budgets\")),React.createElement(Text,{style:styles.mediumUp},\"Budget Name\"),React.createElement(TextInput,{style:styles.input,onChangeText:function onChangeText(bn){return _this3.setState({budgetName:bn});}}),React.createElement(Text,{style:styles.mediumUp},\"Budget Goal\"),React.createElement(TextInput,{style:styles.input,onChangeText:function onChangeText(bg){return _this3.setState({budgetGoal:bg});}}),React.createElement(Text,{style:styles.mediumUp},\"Starting Progress\"),React.createElement(TextInput,{style:styles.input,onChangeText:function onChangeText(pr){return _this3.setState({budgetProgress:pr});}}),React.createElement(TouchableWithoutFeedback,{onPress:addBudget},React.createElement(View,{style:styles.addBudgetButton},React.createElement(Text,{style:styles.medium},React.createElement(FontAwesome,{name:\"plus\",size:24,color:\"black\"}),\"Add\")))));}}]);return Budgets;}(React.PureComponent);export{Budgets as default};var styles=StyleSheet.create({container:{flex:1,justifyContent:\"space-between\",padding:20,backgroundColor:'#19C0FF'},newBudgetHeader:{backgroundColor:'#fb2b60',width:414,flex:.24,bottom:70},nBHeader:{fontSize:48,alignSelf:'center',top:40},input:{width:315,flex:.15,backgroundColor:'white',borderTopLeftRadius:50,borderTopRightRadius:50,borderBottomLeftRadius:50,borderBottomRightRadius:50,margin:20,bottom:50},newBudgetButton:{flex:.1,backgroundColor:\"#fcb401\",width:350,bottom:0.5,borderTopLeftRadius:50,borderTopRightRadius:50,borderBottomLeftRadius:50,borderBottomRightRadius:50,alignItems:'center',justifyContent:'center',top:25},addBudgetButton:{flex:.13,backgroundColor:\"#fcb401\",width:350,bottom:0.5,borderTopLeftRadius:50,borderTopRightRadius:50,borderBottomLeftRadius:50,borderBottomRightRadius:50,alignItems:'center',justifyContent:'center'},submitButtonText:{color:'white'},large:{fontSize:28,justifyContent:'center',alignItems:'center'},medium:{fontSize:24,justifyContent:'center',alignItems:'center'},small:{fontSize:16,justifyContent:'center',alignItems:'center'},mediumUp:{fontSize:36,justifyContent:'center',alignItems:'center',bottom:40},inner:{backgroundColor:'#55D0F1',flex:0.80,padding:5,width:350,borderTopLeftRadius:20,borderTopRightRadius:20,borderBottomLeftRadius:20,borderBottomRightRadius:20},top:{flex:0.4,backgroundColor:\"#19c0ff\",width:350,borderTopLeftRadius:20,borderTopRightRadius:20,borderBottomLeftRadius:20,borderBottomRightRadius:20,margin:10,alignItems:'center',paddingTop:10,top:40},label:{flex:0.15,backgroundColor:\"#fcb401\",width:350,borderTopLeftRadius:50,borderTopRightRadius:50,borderBottomLeftRadius:50,borderBottomRightRadius:50,alignItems:'center',justifyContent:'center'},middle:{flex:0.4,backgroundColor:\"#19c0ff\",width:350,borderTopLeftRadius:20,borderTopRightRadius:20,borderBottomLeftRadius:20,borderBottomRightRadius:20,margin:10,alignItems:'center',paddingTop:10,top:40}});","map":{"version":3,"sources":["/home/joeyg/Desktop/mobile-app/budgetbuddy-mobileapp/src/screens/Budgets.js"],"names":["React","useState","Center","LogoutButton","AsyncStorage","buildPath","FontAwesome","Budgets","props","state","budgets","show","currentBudget","rerender","changeAllowance","manage","budgetName","budgetGoal","budgetProgress","getItem","obj","email","js","JSON","stringify","Promise","fetch","method","body","headers","all","then","res1","res2","json","total","i","results","length","BudgetGoal","BudgetProgress","setState","allowance","diff","index","newName","newGoal","handleClose","handleShow","event","preventDefault","currentTarget","getAttribute","name","addBudget","prog","parseInt","Alert","alert","userEmail","BudgetName","js2","funds","console","log","toString","remove","confirmAlert","title","message","buttons","label","onClick","deleteBudget","updateBudget","_id","response","text","txt","res","parse","error","addProgress","obj2","newAmount","styles","container","newBudgetButton","medium","map","budget","top","inner","small","newBudgetHeader","nBHeader","mediumUp","input","bn","bg","pr","addBudgetButton","PureComponent","StyleSheet","create","flex","justifyContent","padding","backgroundColor","width","bottom","fontSize","alignSelf","borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius","margin","alignItems","submitButtonText","color","large","paddingTop","middle"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\n//import ReactApexChart from 'react-apexcharts'\nimport { Center } from '../components/Center';\nimport { SafeAreaView,Text, Button, StyleSheet,  TouchableWithoutFeedback, View, ScrollView, TextInput } from 'react-native';\nimport { LogoutButton } from '../components/LogoutButton';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { buildPath } from '../functions/BuildPath';\nimport { FontAwesome } from '@expo/vector-icons'; \n\nexport default class Budgets extends React.PureComponent {\n    constructor(props) {\n        super(props);\n        this.state = {\n            budgets: [],\n            show: false,\n            currentBudget: -1,\n            rerender: false,\n            changeAllowance: false, \n            manage: false, \n            budgetName: '', \n            budgetGoal: -1, \n            budgetProgress: -1\n        }\n    }\n\n    async componentDidMount() {\n        var obj = {email: await AsyncStorage.getItem(\"email\")};\n        var js = JSON.stringify(obj);\n        Promise.all([\n            fetch(buildPath('api/showAllBudgets'),\n            {method:'POST', body: js, headers:{'Content-Type': 'application/json', 'Authorization': 'Bearer ' + await AsyncStorage.getItem(\"token\")}}),\n            fetch(buildPath('api/getAllowance'),\n                {method:'POST', body: js, headers: {'Content-Type': 'application/json'}})    \n        ])\n            .then(([res1, res2]) => {\n                return Promise.all([res1.json(), res2.json()])\n        })\n        .then(([res1, res2]) => {\n            var total = 0;\n            for (var i = 0; i < res1.results.length; i++)\n            total += (res1.results[i].BudgetGoal - res1.results[i].BudgetProgress);\n            this.setState({\n            budgets: res1.results,\n            allowance: res2.allowance,\n            diff : 0,\n            index: -1, \n            total : total\n            })\n        })\n    }\n\n    render () {\n        const { budgets, show, manage, currentBudget, budgetName, budgetGoal, budgetProgress, allowance, diff, index, total } = this.state;\n        //const [manage, setManage] = React.useState(false);\n\n        var newName = '', newGoal ='';\n    \n        const handleClose = () => this.setState({show: false});\n        const handleShow = async event => {\n          event.preventDefault();\n          const index = event.currentTarget.getAttribute(\"data-id\");\n          this.setState({show: true, currentBudget: index, name:budgets[index].name});\n        }\n\n\n        const addBudget = async event => \n        {\n          event.preventDefault();\n\n          var prog;\n          if(!budgetProgress)\n            prog = 0;\n          else\n            prog = parseInt(budgetProgress);\n\n          if (prog > allowance) {\n            Alert.alert(\"You do not have enough allowance to add that much progress\");\n            return;\n          }\n          var userEmail = await AsyncStorage.getItem(\"email\");\n          var obj = {email:userEmail,BudgetName:budgetName, BudgetGoal:budgetGoal, BudgetProgress:budgetProgress};\n          var js = JSON.stringify(obj);\n\n          var js2 = JSON.stringify({email:userEmail, funds: (parseInt(allowance) - prog)});\n\n          try\n          {\n              // Call to API\n              Promise.all([\n                fetch(buildPath('api/addbudget'),\n                  {method:'POST',body:js,headers:{'Content-Type': 'application/json', 'Authorization': 'Bearer ' + await AsyncStorage.getItem(\"token\")}}),\n                fetch(buildPath('api/addAllowance'),\n                  {method:'POST', body: js2, headers: {'Content-Type': 'application/json'}})    \n              ])\n                .then(([res1, res2]) => {\n                  return Promise.all([res1.json(), res2.json()])\n                })\n                .then(([res1, res2]) => {\n                  this.setState({manage:false});\n                })\n          }\n          catch(e)\n          {\n            console.log(e.toString());\n          }\n      };\n\n        const remove = event => {\n            handleClose();\n            confirmAlert({\n              title: 'Confirm to delete',\n              message: 'Are you sure you want to delete this budget?',\n              buttons: [\n                {\n                  label: 'Yes',\n                  onClick: () => deleteBudget()\n                },\n                {\n                  label: 'No',\n                  onClick: () => this.setState({show: true, currentBudget: event.currentTarget.getAttribute(\"data-id\")})\n                }\n              ]\n            });\n          };\n\n        const updateBudget = async event => {\n            event.preventDefault();\n    \n            var obj = {BudgetName: newName, BudgetGoal: newGoal,\n                _id:event.currentTarget.getAttribute(\"data-id\")};\n            var js = JSON.stringify(obj);\n        \n            try\n            {\n                // Call to API\n                const response = await fetch(buildPath('api/updatebudget'),\n                    {method:'POST',body:js,headers:{'Content-Type': 'application/json', 'Authorization': 'Bearer ' + await AsyncStorage.getItem(\"token\")}});\n        \n                // Parsing response\n                var txt = await response.text();\n                var res = JSON.parse(txt);\n        \n                if( res.error.length > 0 )\n                {\n                    Alert.alert( \"API Error:\" + res.error );\n                }\n                else\n                {\n                    this.setState({index: -1});\n                    this.setState({manage: false});\n                //\n                }\n            }\n            catch(e)\n            {\n                Alert.alert(e.toString());\n            }\n        }\n\n\n\n        const addProgress = async event => {\n            event.preventDefault();\n      \n            if (allowance + diff < 0) {\n              Alert.alert(\"You can't save your progress as you have a negative allowance.\");\n              return;\n            }\n      \n            const index = event.currentTarget.getAttribute(\"data-index\");\n            var obj = {email: await AsyncStorage.getItem(\"email\"), funds: parseInt(allowance + diff)};\n            var js = JSON.stringify(obj);\n      \n            const obj2 = {newAmount: budgets[index].BudgetProgress,\n              _id:event.currentTarget.getAttribute(\"data-id\")};\n            const js2 = JSON.stringify(obj2);\n      \n                try\n                {\n                    // Call to API\n                    Promise.all([\n                    fetch(buildPath('api/addAllowance'),\n                        {method:'POST',body:js,headers:{'Content-Type': 'application/json', 'Authorization': 'Bearer ' + await AsyncStorage.getItem(\"token\")}}),\n                        fetch(buildPath('api/addprogress'),\n                        {method:'POST',body:js2,headers:{'Content-Type': 'application/json', 'Authorization': 'Bearer ' + await AsyncStorage.getItem(\"token\")}})\n                    ]).then(([res1, res2]) => {\n                        return Promise.all([res1.json(), res2.json()])\n                    }).then(([res1, res2]) => {\n                    this.setState({index: -1});\n                    this.setState({manage: false});\n                    //window.location.href = \"/budget\";\n                    })\n                }\n                catch(e)\n                {\n                    alert(e.toString() + \"yee\");\n                }\n            }\n\n        //const [manage, setManage] = React.useState(false);\n        if (!manage)\n        {\n            return (\n                <SafeAreaView style={styles.container}>\n                    <Center>\n                        <TouchableWithoutFeedback onPress={() => this.setState({manage:true})}>\n                            <View style={styles.newBudgetButton}>\n                            <Text style={styles.medium}>\n                                <FontAwesome name=\"plus\" size={24} color=\"black\" /> \n                                    Add new Budgets\n                            </Text>\n                            </View>\n                        </TouchableWithoutFeedback>\n                        <ScrollView>\n                            {budgets.map((budget,i) => \n                                <SafeAreaView style={styles.top}>\n                                    <Text style={styles.medium}>{budget.BudgetName}</Text>\n                                    <SafeAreaView style={styles.inner}>\n                                        <Text style={styles.small}>${budget.BudgetGoal}</Text>\n                                    </SafeAreaView>\n                                    <SafeAreaView style={styles.inner}>\n                                        <Text style={styles.small}>${budget.BudgetProgress}</Text>\n                                    </SafeAreaView>\n                                </SafeAreaView>\n                            )}\n                        </ScrollView>\n                        <LogoutButton/>\n                    </Center>\n                </SafeAreaView>\n            );\n        }\n\n        return (\n            <SafeAreaView style={styles.container}>\n                    <Center>\n                        <SafeAreaView style={styles.newBudgetHeader}>\n                            <Text style={styles.nBHeader}>Add New Budgets</Text>\n                        </SafeAreaView>\n                        <Text style={styles.mediumUp}>Budget Name</Text>\n                        <TextInput style={styles.input}\n                        onChangeText={bn => this.setState({budgetName : bn})}>\n                        </TextInput>\n                        <Text style={styles.mediumUp}>Budget Goal</Text>\n                        <TextInput style={styles.input}\n                        onChangeText={bg => this.setState({budgetGoal : bg})}>\n                        </TextInput>\n                        <Text style={styles.mediumUp}>Starting Progress</Text>\n                        <TextInput style={styles.input}\n                        onChangeText={pr => this.setState({budgetProgress: pr})}>\n                        </TextInput>\n                        <TouchableWithoutFeedback onPress={addBudget}>\n                        <View style={styles.addBudgetButton}>\n                        <Text style={styles.medium}>\n                            <FontAwesome name=\"plus\" size={24} color=\"black\" /> \n                                Add\n                        </Text>\n                        </View>\n                    </TouchableWithoutFeedback>\n                    </Center>\n                </SafeAreaView>\n        );\n    }\n}\n\n\nconst styles = StyleSheet.create({\n    container: {\n        flex: 1,\n        justifyContent: \"space-between\",\n        padding: 20,\n        backgroundColor: '#19C0FF'\n    },\n    newBudgetHeader: {\n        backgroundColor: '#fb2b60',\n        width: 414,\n        flex: .24,\n        bottom: 70\n    },\n    nBHeader: {\n        fontSize: 48,\n        alignSelf: 'center',\n        top: 40\n    },\n    input: {\n        width: 315,\n        flex: .15,\n        backgroundColor: 'white',\n        borderTopLeftRadius: 50,\n        borderTopRightRadius: 50,\n        borderBottomLeftRadius: 50,\n        borderBottomRightRadius: 50,\n        margin: 20, \n        bottom: 50\n    },\n    newBudgetButton: {\n        flex: .1,\n        backgroundColor: \"#fcb401\",\n        width: 350,\n        bottom: 0.5,\n        borderTopLeftRadius: 50,\n        borderTopRightRadius: 50,\n        borderBottomLeftRadius: 50,\n        borderBottomRightRadius: 50,\n        alignItems: 'center',\n        justifyContent: 'center',\n        top: 25\n    },\n    addBudgetButton: {\n        flex: .13,\n        backgroundColor: \"#fcb401\",\n        width: 350,\n        bottom: 0.5,\n        borderTopLeftRadius: 50,\n        borderTopRightRadius: 50,\n        borderBottomLeftRadius: 50,\n        borderBottomRightRadius: 50,\n        alignItems: 'center',\n        justifyContent: 'center',\n    },\n    submitButtonText: {\n        color: 'white'\n    },\n    large: {\n        fontSize: 28,\n        justifyContent: 'center',\n        alignItems: 'center',\n    },\n    medium: {\n        fontSize: 24,\n        justifyContent: 'center',\n        alignItems: 'center'\n    },\n    small: {\n        fontSize: 16,\n        justifyContent: 'center',\n        alignItems: 'center'\n    },\n    mediumUp: {\n        fontSize: 36,\n        justifyContent: 'center',\n        alignItems: 'center',\n        bottom: 40\n    },\n    inner: {\n        backgroundColor: '#55D0F1',\n        flex: 0.80,\n        padding: 5,\n        width: 350, borderTopLeftRadius: 20,\n        borderTopRightRadius: 20,\n        borderBottomLeftRadius: 20,\n        borderBottomRightRadius: 20\n    },\n    top: {\n        flex: 0.4,\n        backgroundColor: \"#19c0ff\",\n        width: 350,\n        borderTopLeftRadius: 20,\n        borderTopRightRadius: 20,\n        borderBottomLeftRadius: 20,\n        borderBottomRightRadius: 20,\n        margin: 10,\n        alignItems: 'center', \n        paddingTop: 10,\n        top: 40,\n    },\n    label: {\n        flex: 0.15,\n        backgroundColor: \"#fcb401\",\n        width: 350,\n        borderTopLeftRadius: 50,\n        borderTopRightRadius: 50,\n        borderBottomLeftRadius: 50,\n        borderBottomRightRadius: 50,\n        alignItems: 'center',\n        justifyContent: 'center'\n    },\n    middle: {\n        flex: 0.4,\n        backgroundColor: \"#19c0ff\",\n        width: 350,\n        borderTopLeftRadius: 20,\n        borderTopRightRadius: 20,\n        borderBottomLeftRadius: 20,\n        borderBottomRightRadius: 20,\n        margin: 10,\n        alignItems: 'center',\n        paddingTop: 10,\n        top: 40,\n    },\n});\n\n//export default Budgets;"]},"metadata":{},"sourceType":"module"}