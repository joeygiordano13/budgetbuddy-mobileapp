{"ast":null,"code":"import _regeneratorRuntime from\"@babel/runtime/regenerator\";import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import _objectDestructuringEmpty from\"@babel/runtime/helpers/objectDestructuringEmpty\";import React,{useState,useContext}from\"react\";import TextInput from\"react-native-web/dist/exports/TextInput\";import Button from\"react-native-web/dist/exports/Button\";import Alert from\"react-native-web/dist/exports/Alert\";import Text from\"react-native-web/dist/exports/Text\";import SafeAreaView from\"react-native-web/dist/exports/SafeAreaView\";import ImageBackground from\"react-native-web/dist/exports/ImageBackground\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import Keyboard from\"react-native-web/dist/exports/Keyboard\";import TouchableWithoutFeedback from\"react-native-web/dist/exports/TouchableWithoutFeedback\";import View from\"react-native-web/dist/exports/View\";import{createStackNavigator}from\"@react-navigation/stack\";import{buildPath}from\"./functions/BuildPath\";import{Center}from\"./components/Center\";import{AuthContext}from\"./AuthProvider\";import{Card}from'react-native-paper';import AsyncStorage from'@react-native-async-storage/async-storage';var Stack=createStackNavigator();export var AuthStack=function AuthStack(_ref){_objectDestructuringEmpty(_ref);return React.createElement(Stack.Navigator,{initialRouteName:\"Login\"},React.createElement(Stack.Screen,{options:{headerTitle:\"Sign In\"},name:\"Login\",component:Login}),React.createElement(Stack.Screen,{options:{headerTitle:\"Sign Up\"},name:\"Register\",component:Register}));};function Login(_ref2){var navigation=_ref2.navigation;var _useContext=useContext(AuthContext),login=_useContext.login;var _React$useState=React.useState(''),_React$useState2=_slicedToArray(_React$useState,2),loginEmail=_React$useState2[0],setEmail=_React$useState2[1];var _React$useState3=React.useState(''),_React$useState4=_slicedToArray(_React$useState3,2),loginPassword=_React$useState4[0],setPassword=_React$useState4[1];var message='';var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showAlert=_useState2[0],setAlert=_useState2[1];var doLogin=function doLogin(event){var obj,js,response,res;return _regeneratorRuntime.async(function doLogin$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();obj={email:loginEmail,password:loginPassword};js=JSON.stringify(obj);_context.prev=3;_context.next=6;return _regeneratorRuntime.awrap(fetch(buildPath('api/login'),{method:'POST',body:js,headers:{'Content-Type':'application/json'}}));case 6:response=_context.sent;_context.t0=JSON;_context.next=10;return _regeneratorRuntime.awrap(response.text());case 10:_context.t1=_context.sent;res=_context.t0.parse.call(_context.t0,_context.t1);if(res.error!=''){Alert.alert('incorrect login, userID: '+res.id+'\\n');console.log('incorrect login email: '+loginEmail+'\\n');message='Email/Password combination incorrect';setAlert(true);}else{Alert.alert('success login, token: '+res.accessToken+'\\n');AsyncStorage.setItem('userID',res.id);AsyncStorage.setItem('token',res.accessToken);login();}_context.next=19;break;case 15:_context.prev=15;_context.t2=_context[\"catch\"](3);Alert.alert(\"failure login email: \"+_context.t2+\"\\n\");return _context.abrupt(\"return\");case 19:case\"end\":return _context.stop();}}},null,null,[[3,15]],Promise);};return React.createElement(SafeAreaView,{style:styles.backgroundImage,source:require(\"../assets/bubblebackground.png\")},React.createElement(Center,null,React.createElement(SafeAreaView,{style:styles.loginBox},React.createElement(TouchableWithoutFeedback,{onPress:function onPress(){navigation.navigate(\"Register\");}},React.createElement(View,{style:styles.submitButtonn},React.createElement(Text,{style:styles.mediumLeft},\"Register\"))),React.createElement(TouchableWithoutFeedback,{onPress:function onPress(){navigation.navigate(\"Login\");}},React.createElement(View,{style:styles.submitButton},React.createElement(Text,{style:styles.medium},\"Login\"))),React.createElement(TextInput,{style:styles.input,onChangeText:function onChangeText(em){return setEmail(em);},placeholder:\"Email\",value:loginEmail}),React.createElement(TextInput,{style:styles.input,onChangeText:function onChangeText(pw){return setPassword(pw);},placeholder:\"Password\",value:loginPassword}),React.createElement(Button,{style:styles.submitButton,color:\"#FB2B60\",title:\"Login\",onPress:doLogin}),React.createElement(Text,{style:\"\"},\"Forgot Password? Click here.\"))));};function Register(_ref3){var navigation=_ref3.navigation;var _React$useState5=React.useState(''),_React$useState6=_slicedToArray(_React$useState5,2),registerUsername=_React$useState6[0],setUsername=_React$useState6[1];var _React$useState7=React.useState(''),_React$useState8=_slicedToArray(_React$useState7,2),registerEmail=_React$useState8[0],setEmail=_React$useState8[1];var _React$useState9=React.useState(''),_React$useState10=_slicedToArray(_React$useState9,2),password=_React$useState10[0],setPassword=_React$useState10[1];var _React$useState11=React.useState(''),_React$useState12=_slicedToArray(_React$useState11,2),passwordConfirm=_React$useState12[0],setPasswordConfirm=_React$useState12[1];var budgetAndFriends=[];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),message=_useState4[0],setMessage=_useState4[1];var doRegistration=function doRegistration(event){var obj,js,response,res;return _regeneratorRuntime.async(function doRegistration$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:event.preventDefault();if(!(registerEmail.length===0||registerUsername.length===0||password.length===0||passwordConfirm.length===0)){_context2.next=5;break;}setMessage(\"Please fill in all fields\");Alert.alert(message);return _context2.abrupt(\"return\");case 5:if(!(password!=passwordConfirm)){_context2.next=9;break;}setMessage(\"Passwords do not match\");Alert.alert(message);return _context2.abrupt(\"return\");case 9:obj={email:registerEmail,username:registerUsername,verification:false,friends:budgetAndFriends,password:password,rankMetric:-1};js=JSON.stringify(obj);_context2.prev=11;_context2.next=14;return _regeneratorRuntime.awrap(fetch(buildPath('api/register'),{method:'POST',body:js,headers:{'Content-Type':'application/json'}}));case 14:response=_context2.sent;_context2.t0=JSON;_context2.next=18;return _regeneratorRuntime.awrap(response.text());case 18:_context2.t1=_context2.sent;res=_context2.t0.parse.call(_context2.t0,_context2.t1);if(res.error!=''){setMessage(res.error);console.log('error');Alert.alert(message);}else{setMessage(\"An email has been sent to \"+registerEmail+\". Please verify your email\");console.log(message);Alert.alert(message);}_context2.next=28;break;case 23:_context2.prev=23;_context2.t2=_context2[\"catch\"](11);console.log('bad api call');Alert.alert(_context2.t2);return _context2.abrupt(\"return\");case 28:case\"end\":return _context2.stop();}}},null,null,[[11,23]],Promise);};return React.createElement(SafeAreaView,{style:styles.backgroundImage},React.createElement(Center,null,React.createElement(SafeAreaView,{style:styles.loginBox},React.createElement(TouchableWithoutFeedback,{onPress:function onPress(){navigation.navigate(\"Login\");}},React.createElement(View,{style:styles.registerButtonn},React.createElement(Text,{style:styles.medium},\"Login\"))),React.createElement(TouchableWithoutFeedback,{onPress:function onPress(){navigation.navigate(\"Register\");}},React.createElement(View,{style:styles.registerButton},React.createElement(Text,{style:styles.medium},\"Register\")))),React.createElement(SafeAreaView,{style:styles.loginBox2},React.createElement(Text,{style:styles.mediumStart},\"Username\"),React.createElement(TextInput,{style:styles.input2,onChangeText:function onChangeText(u){return setUsername(u);},value:registerUsername}),React.createElement(Text,{style:styles.mediumStart},\"Email\"),React.createElement(TextInput,{style:styles.input2,onChangeText:function onChangeText(em){return setEmail(em);},value:registerEmail}),React.createElement(Text,{style:styles.mediumStart},\"Password\"),React.createElement(TextInput,{style:styles.input2,onChangeText:function onChangeText(pw){return setPassword(pw);},value:password}),React.createElement(Text,{style:styles.mediumStart},\"Confirm Password\"),React.createElement(TextInput,{style:styles.input2,onChangeText:function onChangeText(pw){return setPasswordConfirm(pw);},value:passwordConfirm}),React.createElement(Button,{style:styles.submitButton2,color:\"#FB2B60\",title:\"Register\",onPress:doRegistration}),React.createElement(Text,null,message))));}var styles=StyleSheet.create({container:{flex:1,justifyContent:\"space-between\",padding:20,margin:10},input:{flex:5,margin:5,height:20,width:300,right:40,backgroundColor:'#55D0F1',borderTopLeftRadius:50,borderTopRightRadius:50,borderBottomLeftRadius:50,borderBottomRightRadius:50},input2:{flex:0.5,margin:15,height:20,width:300,right:40,backgroundColor:'#55D0F1',borderTopLeftRadius:50,borderTopRightRadius:50,borderBottomLeftRadius:50,borderBottomRightRadius:50},submitButton:{flex:5,backgroundColor:\"#fb2b60\",width:150,height:50,borderTopLeftRadius:50,borderTopRightRadius:50,borderBottomLeftRadius:50,borderBottomRightRadius:50,alignItems:'flex-start',justifyContent:'center',fontSize:50,right:90,paddingStart:50,bottom:195,right:30},submitButtonn:{flex:5,backgroundColor:\"#55D0F1\",width:325,right:30,bottom:131,borderTopLeftRadius:50,borderTopRightRadius:50,borderBottomLeftRadius:50,borderBottomRightRadius:50,alignItems:'center',justifyContent:'center'},registerButton:{flex:2,backgroundColor:\"#fb2b60\",width:150,bottom:71,left:134,borderTopLeftRadius:50,borderTopRightRadius:50,borderBottomLeftRadius:50,borderBottomRightRadius:50,alignItems:'center',justifyContent:'center'},registerButtonn:{flex:2,backgroundColor:\"#55D0F1\",width:305,height:50,borderTopLeftRadius:50,borderTopRightRadius:50,borderBottomLeftRadius:50,borderBottomRightRadius:50,alignItems:'flex-start',justifyContent:'center',fontSize:50,right:20,paddingStart:50,marginTop:30},submitButtonText:{color:'white'},large:{fontSize:28},medium:{fontSize:24,justifyContent:'center',alignItems:'center'},mediumLeft:{fontSize:24,justifyContent:'flex-end',alignItems:'center',left:60},mediumStart:{fontSize:24,justifyContent:'flex-start',alignItems:'center'},backgroundImage:{flex:1,resizeMode:'cover',backgroundColor:'#19C0FF'},loginBox:{flex:.5,backgroundColor:\"#19c0ff\",width:250,borderTopLeftRadius:20,borderTopRightRadius:20,borderBottomLeftRadius:20,borderBottomRightRadius:20,margin:10,paddingTop:20},loginBox2:{flex:1.4,backgroundColor:\"#19c0ff\",width:250,borderTopLeftRadius:20,borderTopRightRadius:20,borderBottomLeftRadius:20,borderBottomRightRadius:20,bottom:50}});","map":{"version":3,"sources":["/home/joeyg/Desktop/mobile-app/budgetbuddy-mobileapp/src/AuthStack.js"],"names":["React","useState","useContext","createStackNavigator","buildPath","Center","AuthContext","Card","AsyncStorage","Stack","AuthStack","headerTitle","Login","Register","navigation","login","loginEmail","setEmail","loginPassword","setPassword","message","showAlert","setAlert","doLogin","event","preventDefault","obj","email","password","js","JSON","stringify","fetch","method","body","headers","response","text","res","parse","error","Alert","alert","id","console","log","accessToken","setItem","styles","backgroundImage","require","loginBox","navigate","submitButtonn","mediumLeft","submitButton","medium","input","em","pw","registerUsername","setUsername","registerEmail","passwordConfirm","setPasswordConfirm","budgetAndFriends","setMessage","doRegistration","length","username","verification","friends","rankMetric","registerButtonn","registerButton","loginBox2","mediumStart","input2","u","submitButton2","StyleSheet","create","container","flex","justifyContent","padding","margin","height","width","right","backgroundColor","borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius","alignItems","fontSize","paddingStart","bottom","left","marginTop","submitButtonText","color","large","resizeMode","paddingTop"],"mappings":"oNAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,UAA1B,KAA4C,OAA5C,C,ooBAEA,OAASC,oBAAT,KAAqC,yBAArC,CACA,OAASC,SAAT,6BACA,OAASC,MAAT,2BACA,OAASC,WAAT,sBACA,OAASC,IAAT,KAAqB,oBAArB,CACA,MAAOC,CAAAA,YAAP,KAAyB,2CAAzB,CAEA,GAAMC,CAAAA,KAAK,CAAGN,oBAAoB,EAAlC,CAEA,MAAO,IAAMO,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,MAAQ,iCAC/B,MACE,qBAAC,KAAD,CAAO,SAAP,EAAiB,gBAAgB,CAAC,OAAlC,EACE,oBAAC,KAAD,CAAO,MAAP,EACE,OAAO,CAAE,CACPC,WAAW,CAAE,SADN,CADX,CAIE,IAAI,CAAC,OAJP,CAKE,SAAS,CAAEC,KALb,EADF,CAQE,oBAAC,KAAD,CAAO,MAAP,EACE,OAAO,CAAE,CACPD,WAAW,CAAE,SADN,CADX,CAIE,IAAI,CAAC,UAJP,CAKE,SAAS,CAAEE,QALb,EARF,CADF,CAkBD,CAnBM,CAqBP,QAASD,CAAAA,KAAT,OAA6B,IAAbE,CAAAA,UAAa,OAAbA,UAAa,iBACXZ,UAAU,CAACI,WAAD,CADC,CACpBS,KADoB,aACpBA,KADoB,qBAGIf,KAAK,CAACC,QAAN,CAAe,EAAf,CAHJ,oDAGpBe,UAHoB,qBAGRC,QAHQ,0CAIUjB,KAAK,CAACC,QAAN,CAAe,EAAf,CAJV,qDAIpBiB,aAJoB,qBAILC,WAJK,qBAM3B,GAAIC,CAAAA,OAAO,CAAG,EAAd,CAN2B,cAQKnB,QAAQ,CAAC,KAAD,CARb,wCAQnBoB,SARmB,eAQRC,QARQ,eAU3B,GAAMC,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,CAAMC,KAAN,2IACZA,KAAK,CAACC,cAAN,GAEIC,GAHQ,CAGF,CAACC,KAAK,CAACX,UAAP,CAAmBY,QAAQ,CAACV,aAA5B,CAHE,CAIRW,EAJQ,CAIHC,IAAI,CAACC,SAAL,CAAeL,GAAf,CAJG,kEAQeM,KAAK,CAAC5B,SAAS,CAAC,WAAD,CAAV,CACxB,CAAC6B,MAAM,CAAC,MAAR,CAAeC,IAAI,CAACL,EAApB,CAAuBM,OAAO,CAAC,CAAC,eAAgB,kBAAjB,CAA/B,CADwB,CARpB,SAQFC,QARE,2BAYEN,IAZF,mDAYmBM,QAAQ,CAACC,IAAT,EAZnB,oCAYJC,GAZI,aAYOC,KAZP,+BAcR,GAAID,GAAG,CAACE,KAAJ,EAAa,EAAjB,CACA,CAEEC,KAAK,CAACC,KAAN,CAAY,4BAA8BJ,GAAG,CAACK,EAAlC,CAAuC,IAAnD,EACAC,OAAO,CAACC,GAAR,CAAY,0BAA4B7B,UAA5B,CAAyC,IAArD,EACAI,OAAO,CAAG,sCAAV,CACAE,QAAQ,CAAC,IAAD,CAAR,CACD,CAPD,IASA,CAEEmB,KAAK,CAACC,KAAN,CAAY,yBAA2BJ,GAAG,CAACQ,WAA/B,CAA6C,IAAzD,EACAtC,YAAY,CAACuC,OAAb,CAAqB,QAArB,CAA+BT,GAAG,CAACK,EAAnC,EACAnC,YAAY,CAACuC,OAAb,CAAqB,OAArB,CAA8BT,GAAG,CAACQ,WAAlC,EACA/B,KAAK,GACN,CA7BO,iFAiCR0B,KAAK,CAACC,KAAN,CAAY,oCAA8B,IAA1C,EAjCQ,2GAAhB,CAsCA,MACI,qBAAC,YAAD,EACA,KAAK,CAAEM,MAAM,CAACC,eADd,CAEA,MAAM,CAAEC,OAAO,kCAFf,EAGE,oBAAC,MAAD,MACE,oBAAC,YAAD,EAAc,KAAK,CAAEF,MAAM,CAACG,QAA5B,EACE,oBAAC,wBAAD,EAA0B,OAAO,CAAE,kBAAM,CACjCrC,UAAU,CAACsC,QAAX,CAAoB,UAApB,EACD,CAFP,EAGE,oBAAC,IAAD,EAAM,KAAK,CAAEJ,MAAM,CAACK,aAApB,EACE,oBAAC,IAAD,EAAM,KAAK,CAAEL,MAAM,CAACM,UAApB,aADF,CAHF,CADF,CAUE,oBAAC,wBAAD,EAA0B,OAAO,CAAE,kBAAM,CACjCxC,UAAU,CAACsC,QAAX,CAAoB,OAApB,EACD,CAFP,EAGE,oBAAC,IAAD,EAAM,KAAK,CAAEJ,MAAM,CAACO,YAApB,EAAkC,oBAAC,IAAD,EAAM,KAAK,CAAEP,MAAM,CAACQ,MAApB,UAAlC,CAHF,CAVF,CAeE,oBAAC,SAAD,EAAW,KAAK,CAAER,MAAM,CAACS,KAAzB,CACE,YAAY,CAAE,sBAAAC,EAAE,QAAIzC,CAAAA,QAAQ,CAACyC,EAAD,CAAZ,EADlB,CAEE,WAAW,CAAC,OAFd,CAGE,KAAK,CAAE1C,UAHT,EAfF,CAoBE,oBAAC,SAAD,EAAW,KAAK,CAAEgC,MAAM,CAACS,KAAzB,CACE,YAAY,CAAE,sBAAAE,EAAE,QAAIxC,CAAAA,WAAW,CAACwC,EAAD,CAAf,EADlB,CAEE,WAAW,CAAC,UAFd,CAGE,KAAK,CAAEzC,aAHT,EApBF,CAwBE,oBAAC,MAAD,EAAQ,KAAK,CAAE8B,MAAM,CAACO,YAAtB,CACA,KAAK,CAAC,SADN,CAEA,KAAK,CAAC,OAFN,CAGA,OAAO,CAAEhC,OAHT,EAxBF,CA4BE,oBAAC,IAAD,EAAM,KAAK,CAAE,EAAb,iCA5BF,CADF,CAHF,CADJ,CAsCD,EAED,QAASV,CAAAA,QAAT,OAAgC,IAAbC,CAAAA,UAAa,OAAbA,UAAa,sBAEUd,KAAK,CAACC,QAAN,CAAe,EAAf,CAFV,qDAEvB2D,gBAFuB,qBAELC,WAFK,0CAGI7D,KAAK,CAACC,QAAN,CAAe,EAAf,CAHJ,qDAGvB6D,aAHuB,qBAGR7C,QAHQ,0CAIEjB,KAAK,CAACC,QAAN,CAAe,EAAf,CAJF,sDAIvB2B,QAJuB,sBAIbT,WAJa,4CAKgBnB,KAAK,CAACC,QAAN,CAAe,EAAf,CALhB,uDAKvB8D,eALuB,sBAKNC,kBALM,sBAO9B,GAAIC,CAAAA,gBAAgB,CAAG,EAAvB,CAP8B,eASEhE,QAAQ,CAAC,EAAD,CATV,yCAStBmB,OATsB,eASb8C,UATa,eAW9B,GAAMC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAAM3C,KAAN,qJACrBA,KAAK,CAACC,cAAN,GADqB,KAEjBqC,aAAa,CAACM,MAAd,GAAyB,CAAzB,EAA8BR,gBAAgB,CAACQ,MAAjB,GAA4B,CAA1D,EACGxC,QAAQ,CAACwC,MAAT,GAAoB,CADvB,EAC4BL,eAAe,CAACK,MAAhB,GAA2B,CAHtC,2BAIfF,UAAU,CAAC,2BAAD,CAAV,CACAzB,KAAK,CAACC,KAAN,CAAYtB,OAAZ,EALe,8CAQjBQ,QAAQ,EAAImC,eARK,2BASnBG,UAAU,CAAC,wBAAD,CAAV,CACAzB,KAAK,CAACC,KAAN,CAAYtB,OAAZ,EAVmB,yCAcjBM,GAdiB,CAcX,CAACC,KAAK,CAAEmC,aAAR,CAAuBO,QAAQ,CAAET,gBAAjC,CAAmDU,YAAY,CAAE,KAAjE,CACAC,OAAO,CAAEN,gBADT,CAC2BrC,QAAQ,CAAEA,QADrC,CAC+C4C,UAAU,CAAE,CAAC,CAD5D,CAdW,CAgBjB3C,EAhBiB,CAgBZC,IAAI,CAACC,SAAL,CAAeL,GAAf,CAhBY,sEAmBIM,KAAK,CAAC5B,SAAS,CAAC,cAAD,CAAV,CACtB,CAAC6B,MAAM,CAAC,MAAR,CAAgBC,IAAI,CAACL,EAArB,CAAyBM,OAAO,CAAC,CAAC,eAAgB,kBAAjB,CAAjC,CADsB,CAnBT,UAmBbC,QAnBa,6BAsBTN,IAtBS,oDAsBQM,QAAQ,CAACC,IAAT,EAtBR,sCAsBfC,GAtBe,cAsBJC,KAtBI,iCAwBnB,GAAID,GAAG,CAACE,KAAJ,EAAa,EAAjB,CAAqB,CACnB0B,UAAU,CAAC5B,GAAG,CAACE,KAAL,CAAV,CACAI,OAAO,CAACC,GAAR,CAAY,OAAZ,EACAJ,KAAK,CAACC,KAAN,CAAYtB,OAAZ,EACD,CAJD,IAIO,CACL8C,UAAU,CAAC,6BAA+BJ,aAA/B,CAA+C,4BAAhD,CAAV,CACAlB,OAAO,CAACC,GAAR,CAAYzB,OAAZ,EACAqB,KAAK,CAACC,KAAN,CAAYtB,OAAZ,EACD,CAhCkB,sFAkCnBwB,OAAO,CAACC,GAAR,CAAY,cAAZ,EACAJ,KAAK,CAACC,KAAN,eAnCmB,8GAAvB,CAwCA,MACE,qBAAC,YAAD,EACA,KAAK,CAAEM,MAAM,CAACC,eADd,EAEE,oBAAC,MAAD,MACA,oBAAC,YAAD,EAAc,KAAK,CAAED,MAAM,CAACG,QAA5B,EACI,oBAAC,wBAAD,EAA0B,OAAO,CAAE,kBAAM,CACjCrC,UAAU,CAACsC,QAAX,CAAoB,OAApB,EACD,CAFP,EAGE,oBAAC,IAAD,EAAM,KAAK,CAAEJ,MAAM,CAACyB,eAApB,EAAqC,oBAAC,IAAD,EAAM,KAAK,CAAEzB,MAAM,CAACQ,MAApB,UAArC,CAHF,CADJ,CAMI,oBAAC,wBAAD,EAA0B,OAAO,CAAE,kBAAM,CACjC1C,UAAU,CAACsC,QAAX,CAAoB,UAApB,EACD,CAFP,EAGE,oBAAC,IAAD,EAAM,KAAK,CAAEJ,MAAM,CAAC0B,cAApB,EACE,oBAAC,IAAD,EAAM,KAAK,CAAE1B,MAAM,CAACQ,MAApB,aADF,CAHF,CANJ,CADA,CAiBE,oBAAC,YAAD,EAAc,KAAK,CAAER,MAAM,CAAC2B,SAA5B,EACI,oBAAC,IAAD,EAAM,KAAK,CAAE3B,MAAM,CAAC4B,WAApB,aADJ,CAII,oBAAC,SAAD,EAAW,KAAK,CAAE5B,MAAM,CAAC6B,MAAzB,CACE,YAAY,CAAE,sBAAAC,CAAC,QAAIjB,CAAAA,WAAW,CAACiB,CAAD,CAAf,EADjB,CAEE,KAAK,CAAElB,gBAFT,EAJJ,CAOI,oBAAC,IAAD,EAAM,KAAK,CAAEZ,MAAM,CAAC4B,WAApB,UAPJ,CAUI,oBAAC,SAAD,EAAW,KAAK,CAAE5B,MAAM,CAAC6B,MAAzB,CACE,YAAY,CAAE,sBAAAnB,EAAE,QAAIzC,CAAAA,QAAQ,CAACyC,EAAD,CAAZ,EADlB,CAEE,KAAK,CAAEI,aAFT,EAVJ,CAaI,oBAAC,IAAD,EAAM,KAAK,CAAEd,MAAM,CAAC4B,WAApB,aAbJ,CAgBI,oBAAC,SAAD,EAAW,KAAK,CAAE5B,MAAM,CAAC6B,MAAzB,CACE,YAAY,CAAE,sBAAAlB,EAAE,QAAIxC,CAAAA,WAAW,CAACwC,EAAD,CAAf,EADlB,CAEE,KAAK,CAAE/B,QAFT,EAhBJ,CAmBI,oBAAC,IAAD,EAAM,KAAK,CAAEoB,MAAM,CAAC4B,WAApB,qBAnBJ,CAsBI,oBAAC,SAAD,EAAW,KAAK,CAAE5B,MAAM,CAAC6B,MAAzB,CACE,YAAY,CAAE,sBAAAlB,EAAE,QAAIK,CAAAA,kBAAkB,CAACL,EAAD,CAAtB,EADlB,CAEE,KAAK,CAAEI,eAFT,EAtBJ,CAyBI,oBAAC,MAAD,EAAQ,KAAK,CAAEf,MAAM,CAAC+B,aAAtB,CACE,KAAK,CAAC,SADR,CAEE,KAAK,CAAC,UAFR,CAGE,OAAO,CAAEZ,cAHX,EAzBJ,CA6BI,oBAAC,IAAD,MAAO/C,OAAP,CA7BJ,CAjBF,CAFF,CADF,CAsDD,CAED,GAAM4B,CAAAA,MAAM,CAAGgC,UAAU,CAACC,MAAX,CAAkB,CAC/BC,SAAS,CAAE,CACTC,IAAI,CAAE,CADG,CAETC,cAAc,CAAE,eAFP,CAGTC,OAAO,CAAE,EAHA,CAITC,MAAM,CAAE,EAJC,CADoB,CAO/B7B,KAAK,CAAE,CACL0B,IAAI,CAAE,CADD,CAELG,MAAM,CAAE,CAFH,CAGLC,MAAM,CAAE,EAHH,CAILC,KAAK,CAAE,GAJF,CAKLC,KAAK,CAAE,EALF,CAMLC,eAAe,CAAE,SANZ,CAOLC,mBAAmB,CAAE,EAPhB,CAQLC,oBAAoB,CAAE,EARjB,CASLC,sBAAsB,CAAE,EATnB,CAULC,uBAAuB,CAAE,EAVpB,CAPwB,CAmB/BjB,MAAM,CAAE,CACNM,IAAI,CAAE,GADA,CAENG,MAAM,CAAE,EAFF,CAGNC,MAAM,CAAE,EAHF,CAINC,KAAK,CAAE,GAJD,CAKNC,KAAK,CAAE,EALD,CAMNC,eAAe,CAAE,SANX,CAONC,mBAAmB,CAAE,EAPf,CAQNC,oBAAoB,CAAE,EARhB,CASNC,sBAAsB,CAAE,EATlB,CAUNC,uBAAuB,CAAE,EAVnB,CAnBuB,CA+B/BvC,YAAY,CAAE,CACZ4B,IAAI,CAAE,CADM,CAEZO,eAAe,CAAE,SAFL,CAGZF,KAAK,CAAE,GAHK,CAIZD,MAAM,CAAE,EAJI,CAKZI,mBAAmB,CAAE,EALT,CAMZC,oBAAoB,CAAE,EANV,CAOZC,sBAAsB,CAAE,EAPZ,CAQZC,uBAAuB,CAAE,EARb,CASZC,UAAU,CAAE,YATA,CAUZX,cAAc,CAAE,QAVJ,CAWZY,QAAQ,CAAE,EAXE,CAYZP,KAAK,CAAE,EAZK,CAaZQ,YAAY,CAAE,EAbF,CAcZC,MAAM,CAAE,GAdI,CAeZT,KAAK,CAAE,EAfK,CA/BiB,CAgD/BpC,aAAa,CAAE,CACb8B,IAAI,CAAE,CADO,CAEbO,eAAe,CAAE,SAFJ,CAGbF,KAAK,CAAE,GAHM,CAIbC,KAAK,CAAE,EAJM,CAKbS,MAAM,CAAE,GALK,CAMbP,mBAAmB,CAAE,EANR,CAObC,oBAAoB,CAAE,EAPT,CAQbC,sBAAsB,CAAE,EARX,CASbC,uBAAuB,CAAE,EATZ,CAUbC,UAAU,CAAE,QAVC,CAWbX,cAAc,CAAE,QAXH,CAhDgB,CA6D/BV,cAAc,CAAE,CACdS,IAAI,CAAE,CADQ,CAEdO,eAAe,CAAE,SAFH,CAGdF,KAAK,CAAE,GAHO,CAIdU,MAAM,CAAE,EAJM,CAKdC,IAAI,CAAE,GALQ,CAMdR,mBAAmB,CAAE,EANP,CAOdC,oBAAoB,CAAE,EAPR,CAQdC,sBAAsB,CAAE,EARV,CASdC,uBAAuB,CAAE,EATX,CAUdC,UAAU,CAAE,QAVE,CAWdX,cAAc,CAAE,QAXF,CA7De,CA0E/BX,eAAe,CAAE,CACfU,IAAI,CAAE,CADS,CAEfO,eAAe,CAAE,SAFF,CAGfF,KAAK,CAAE,GAHQ,CAIfD,MAAM,CAAE,EAJO,CAKfI,mBAAmB,CAAE,EALN,CAMfC,oBAAoB,CAAE,EANP,CAOfC,sBAAsB,CAAE,EAPT,CAQfC,uBAAuB,CAAE,EARV,CASfC,UAAU,CAAE,YATG,CAUfX,cAAc,CAAE,QAVD,CAWfY,QAAQ,CAAE,EAXK,CAYfP,KAAK,CAAE,EAZQ,CAafQ,YAAY,CAAE,EAbC,CAcfG,SAAS,CAAE,EAdI,CA1Ec,CA0F/BC,gBAAgB,CAAE,CAChBC,KAAK,CAAE,OADS,CA1Fa,CA6F/BC,KAAK,CAAE,CACLP,QAAQ,CAAE,EADL,CA7FwB,CAgG/BxC,MAAM,CAAE,CACNwC,QAAQ,CAAE,EADJ,CAENZ,cAAc,CAAE,QAFV,CAGNW,UAAU,CAAE,QAHN,CAhGuB,CAqGjCzC,UAAU,CAAE,CACV0C,QAAQ,CAAE,EADA,CAEVZ,cAAc,CAAE,UAFN,CAGVW,UAAU,CAAE,QAHF,CAIVI,IAAI,CAAE,EAJI,CArGqB,CA2GjCvB,WAAW,CAAE,CACXoB,QAAQ,CAAE,EADC,CAEXZ,cAAc,CAAE,YAFL,CAGXW,UAAU,CAAE,QAHD,CA3GoB,CAgH/B9C,eAAe,CAAE,CACfkC,IAAI,CAAE,CADS,CAEfqB,UAAU,CAAE,OAFG,CAGfd,eAAe,CAAE,SAHF,CAhHc,CAqH/BvC,QAAQ,CAAE,CACRgC,IAAI,CAAE,EADE,CAERO,eAAe,CAAE,SAFT,CAGRF,KAAK,CAAE,GAHC,CAIRG,mBAAmB,CAAE,EAJb,CAKRC,oBAAoB,CAAE,EALd,CAMRC,sBAAsB,CAAE,EANhB,CAORC,uBAAuB,CAAE,EAPjB,CAQRR,MAAM,CAAE,EARA,CASRmB,UAAU,CAAE,EATJ,CArHqB,CAgIjC9B,SAAS,CAAE,CACTQ,IAAI,CAAE,GADG,CAETO,eAAe,CAAE,SAFR,CAGTF,KAAK,CAAE,GAHE,CAITG,mBAAmB,CAAE,EAJZ,CAKTC,oBAAoB,CAAE,EALb,CAMTC,sBAAsB,CAAE,EANf,CAOTC,uBAAuB,CAAE,EAPhB,CAQTI,MAAM,CAAE,EARC,CAhIsB,CAAlB,CAAf","sourcesContent":["import React, { useState, useContext } from \"react\";\nimport { TextInput, Button, Alert, Text, SafeAreaView, ImageBackground, StyleSheet, Keyboard, TouchableWithoutFeedback, View } from 'react-native';\nimport { createStackNavigator } from \"@react-navigation/stack\";\nimport { buildPath } from './functions/BuildPath';\nimport { Center } from './components/Center';\nimport { AuthContext } from './AuthProvider';\nimport { Card } from 'react-native-paper';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\n\nconst Stack = createStackNavigator();\n\nexport const AuthStack = ({}) => {\n  return (\n    <Stack.Navigator initialRouteName=\"Login\">\n      <Stack.Screen\n        options={{\n          headerTitle: \"Sign In\"\n        }}\n        name=\"Login\"\n        component={Login}\n      />\n      <Stack.Screen\n        options={{\n          headerTitle: \"Sign Up\"\n        }}\n        name=\"Register\"\n        component={Register}\n      />\n    </Stack.Navigator>\n  );\n};\n\nfunction Login({navigation}) {\n  const {login} = useContext(AuthContext);\n\n  const [loginEmail, setEmail] = React.useState('');\n  const [loginPassword, setPassword] = React.useState('');\n\n  var message = '';\n\n  const [ showAlert, setAlert ] = useState(false);\n\n  const doLogin = async event => {\n      event.preventDefault();\n\n      var obj = {email:loginEmail, password:loginPassword};\n      var js = JSON.stringify(obj);\n      try\n      {\n          // API call\n          const response = await fetch(buildPath('api/login'),\n              {method:'POST',body:js,headers:{'Content-Type': 'application/json'}});\n\n          // Parse JSON response\n          var res = JSON.parse(await response.text());\n\n          if( res.error != '')\n          {\n            //Alert.alert(\"incorrect login email: \" + loginEmail + '\\n');\n            Alert.alert('incorrect login, userID: ' + res.id + '\\n');\n            console.log('incorrect login email: ' + loginEmail + '\\n');\n            message = 'Email/Password combination incorrect';\n            setAlert(true);\n          }\n          else\n          {\n            //console.log(\"success login email: \" + loginEmail + '\\n');\n            Alert.alert('success login, token: ' + res.accessToken + '\\n');\n            AsyncStorage.setItem('userID', res.id);\n            AsyncStorage.setItem('token', res.accessToken);\n            login();\n          }\n      }\n      catch(e)\n      {\n          Alert.alert(\"failure login email: \" + e + \"\\n\");\n          return;\n      }\n  }\n\n  return (\n      <SafeAreaView\n      style={styles.backgroundImage} \n      source={require('../assets/bubblebackground.png')}>\n        <Center>\n          <SafeAreaView style={styles.loginBox}>\n            <TouchableWithoutFeedback onPress={() => {\n                    navigation.navigate(\"Register\");\n                  }}>\n              <View style={styles.submitButtonn}>\n                <Text style={styles.mediumLeft}>\n                  Register\n                </Text>\n              </View>\n            </TouchableWithoutFeedback>\n            <TouchableWithoutFeedback onPress={() => {\n                    navigation.navigate(\"Login\");\n                  }}>\n              <View style={styles.submitButton}><Text style={styles.medium}>Login</Text></View>\n            </TouchableWithoutFeedback>\n            <TextInput style={styles.input}\n              onChangeText={em => setEmail(em)}\n              placeholder=\"Email\"\n              value={loginEmail}>\n            </TextInput>\n            <TextInput style={styles.input}\n              onChangeText={pw => setPassword(pw)}\n              placeholder=\"Password\"\n              value={loginPassword}/>\n            <Button style={styles.submitButton}\n            color=\"#FB2B60\"\n            title=\"Login\"\n            onPress={doLogin}/>\n            <Text style={\"\"}>Forgot Password? Click here.</Text>\n          </SafeAreaView>\n        </Center>\n      </SafeAreaView>\n  );\n};\n\nfunction Register({navigation}) {\n  // Register usestates\n  const [registerUsername, setUsername] = React.useState('');\n  const [registerEmail, setEmail] = React.useState('');\n  const [password, setPassword] = React.useState('');\n  const [passwordConfirm, setPasswordConfirm] = React.useState('');\n\n  var budgetAndFriends = [];\n  \n  const [ message, setMessage ] = useState('');\n  \n  const doRegistration = async event => {\n    event.preventDefault();\n    if (registerEmail.length === 0 || registerUsername.length === 0\n        || password.length === 0 || passwordConfirm.length === 0) {\n          setMessage(\"Please fill in all fields\");\n          Alert.alert(message);\n          return;\n        }\n    if (password != passwordConfirm) {\n      setMessage(\"Passwords do not match\");\n      Alert.alert(message);\n      return;\n    }\n\n    var obj = {email: registerEmail, username: registerUsername, verification: false,\n              friends: budgetAndFriends, password: password, rankMetric: -1};\n    var js = JSON.stringify(obj);\n\n    try {\n      const response = await fetch(buildPath('api/register'),\n            {method:'POST', body:js, headers:{'Content-Type': 'application/json'}});\n\n      var res = JSON.parse(await response.text());\n\n      if (res.error != '') {\n        setMessage(res.error);\n        console.log('error');\n        Alert.alert(message);\n      } else {\n        setMessage(\"An email has been sent to \" + registerEmail + \". Please verify your email\");\n        console.log(message);\n        Alert.alert(message);\n      }\n    } catch (e) {\n      console.log('bad api call');\n      Alert.alert(e);\n      return;\n    }\n  }\n\n  return (\n    <SafeAreaView\n    style={styles.backgroundImage} >\n      <Center>\n      <SafeAreaView style={styles.loginBox}>\n          <TouchableWithoutFeedback onPress={() => {\n                  navigation.navigate(\"Login\");\n                }}>\n            <View style={styles.registerButtonn}><Text style={styles.medium}>Login</Text></View>\n          </TouchableWithoutFeedback>\n          <TouchableWithoutFeedback onPress={() => {\n                  navigation.navigate(\"Register\");\n                }}>\n            <View style={styles.registerButton}>\n              <Text style={styles.medium}>\n                Register\n              </Text>\n            </View>\n          </TouchableWithoutFeedback>\n          </SafeAreaView>\n        <SafeAreaView style={styles.loginBox2}>\n            <Text style={styles.mediumStart}>\n                Username\n            </Text>\n            <TextInput style={styles.input2}\n              onChangeText={u => setUsername(u)}\n              value={registerUsername}></TextInput>\n            <Text style={styles.mediumStart}>\n                Email\n            </Text>\n            <TextInput style={styles.input2}\n              onChangeText={em => setEmail(em)}\n              value={registerEmail}></TextInput>\n            <Text style={styles.mediumStart}>\n                Password\n            </Text>\n            <TextInput style={styles.input2}\n              onChangeText={pw => setPassword(pw)}\n              value={password}></TextInput>\n            <Text style={styles.mediumStart}>\n                Confirm Password\n            </Text>\n            <TextInput style={styles.input2}\n              onChangeText={pw => setPasswordConfirm(pw)}\n              value={passwordConfirm}></TextInput>\n            <Button style={styles.submitButton2}\n              color=\"#FB2B60\"\n              title=\"Register\"\n              onPress={doRegistration}/>\n            <Text>{message}</Text>\n        </SafeAreaView>\n      </Center>\n    </SafeAreaView>  \n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    justifyContent: \"space-between\",\n    padding: 20,\n    margin: 10,\n  },\n  input: {\n    flex: 5,\n    margin: 5,\n    height: 20,\n    width: 300,\n    right: 40,\n    backgroundColor: '#55D0F1',\n    borderTopLeftRadius: 50,\n    borderTopRightRadius: 50,\n    borderBottomLeftRadius: 50,\n    borderBottomRightRadius: 50,\n  },\n  input2: {\n    flex: 0.5,\n    margin: 15,\n    height: 20,\n    width: 300,\n    right: 40,\n    backgroundColor: '#55D0F1',\n    borderTopLeftRadius: 50,\n    borderTopRightRadius: 50,\n    borderBottomLeftRadius: 50,\n    borderBottomRightRadius: 50,\n  },\n  submitButton: {\n    flex: 5,\n    backgroundColor: \"#fb2b60\",\n    width: 150,\n    height: 50,\n    borderTopLeftRadius: 50,\n    borderTopRightRadius: 50,\n    borderBottomLeftRadius: 50,\n    borderBottomRightRadius: 50,\n    alignItems: 'flex-start',\n    justifyContent: 'center',\n    fontSize: 50,\n    right: 90,\n    paddingStart: 50,\n    bottom: 195,\n    right: 30\n  },\n  submitButtonn: {\n    flex: 5,\n    backgroundColor: \"#55D0F1\",\n    width: 325,\n    right: 30,\n    bottom: 131,\n    borderTopLeftRadius: 50,\n    borderTopRightRadius: 50,\n    borderBottomLeftRadius: 50,\n    borderBottomRightRadius: 50,\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  registerButton: {\n    flex: 2,\n    backgroundColor: \"#fb2b60\",\n    width: 150,\n    bottom: 71,\n    left: 134,\n    borderTopLeftRadius: 50,\n    borderTopRightRadius: 50,\n    borderBottomLeftRadius: 50,\n    borderBottomRightRadius: 50,\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  registerButtonn: {\n    flex: 2,\n    backgroundColor: \"#55D0F1\",\n    width: 305,\n    height: 50,\n    borderTopLeftRadius: 50,\n    borderTopRightRadius: 50,\n    borderBottomLeftRadius: 50,\n    borderBottomRightRadius: 50,\n    alignItems: 'flex-start',\n    justifyContent: 'center',\n    fontSize: 50,\n    right: 20,\n    paddingStart: 50, \n    marginTop: 30\n  },\n  submitButtonText: {\n    color: 'white'\n  },\n  large: {\n    fontSize: 28\n  },\n  medium: {\n    fontSize: 24,\n    justifyContent: 'center',\n    alignItems: 'center'\n},\nmediumLeft: {\n  fontSize: 24,\n  justifyContent: 'flex-end',\n  alignItems: 'center',\n  left: 60\n},\nmediumStart: {\n  fontSize: 24,\n  justifyContent: 'flex-start',\n  alignItems: 'center'\n},\n  backgroundImage: {\n    flex: 1,\n    resizeMode: 'cover',\n    backgroundColor: '#19C0FF'\n  }, \n  loginBox: {\n    flex: .5,\n    backgroundColor: \"#19c0ff\",\n    width: 250,\n    borderTopLeftRadius: 20,\n    borderTopRightRadius: 20,\n    borderBottomLeftRadius: 20,\n    borderBottomRightRadius: 20,\n    margin: 10,\n    paddingTop: 20\n},\nloginBox2: {\n  flex: 1.4,\n  backgroundColor: \"#19c0ff\",\n  width: 250,\n  borderTopLeftRadius: 20,\n  borderTopRightRadius: 20,\n  borderBottomLeftRadius: 20,\n  borderBottomRightRadius: 20,\n  bottom: 50\n},\n});"]},"metadata":{},"sourceType":"module"}