{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/home/joeyg/Desktop/mobile-app/budgetbuddy-mobileapp/src/components/Login.js\";\nimport React, { useState, useContext } from 'react';\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport ImageBackground from \"react-native-web/dist/exports/ImageBackground\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport { Center } from \"../components/Center\";\nimport { AuthContext } from \"./AuthProvider\";\nimport { buildPath } from \"../functions/BuildPath\";\n\nfunction Login(_ref) {\n  var navigation = _ref.navigation;\n\n  var _React$useState = React.useState(''),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      loginEmail = _React$useState2[0],\n      setEmail = _React$useState2[1];\n\n  var _React$useState3 = React.useState(''),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      loginPassword = _React$useState4[0],\n      setPassword = _React$useState4[1];\n\n  var message = '';\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      showAlert = _useState2[0],\n      setAlert = _useState2[1];\n\n  var doLogin = function doLogin(event) {\n    var obj, js, response, res;\n    return _regeneratorRuntime.async(function doLogin$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            event.preventDefault();\n            obj = {\n              email: loginEmail.value,\n              password: loginPassword.value\n            };\n            js = JSON.stringify(obj);\n            _context.prev = 3;\n            _context.next = 6;\n            return _regeneratorRuntime.awrap(fetch(buildPath('api/login'), {\n              method: 'POST',\n              body: js,\n              headers: {\n                'Content-Type': 'application/json'\n              }\n            }));\n\n          case 6:\n            response = _context.sent;\n            _context.t0 = JSON;\n            _context.next = 10;\n            return _regeneratorRuntime.awrap(response.text());\n\n          case 10:\n            _context.t1 = _context.sent;\n            res = _context.t0.parse.call(_context.t0, _context.t1);\n\n            if (res.error != '') {\n              message = 'Email/Password combination incorrect';\n              setAlert(true);\n            } else {\n              localStorage.setItem('email', loginEmail.value);\n              localStorage.setItem('userID', res.id);\n            }\n\n            _context.next = 19;\n            break;\n\n          case 15:\n            _context.prev = 15;\n            _context.t2 = _context[\"catch\"](3);\n            Alert.alert(_context.t2.toString);\n            return _context.abrupt(\"return\");\n\n          case 19:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[3, 15]], Promise);\n  };\n\n  return React.createElement(ImageBackground, {\n    style: styles.backgroundImage,\n    source: require(\"../../assets/bubblebackground.png\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }\n  }, React.createElement(SafeAreaView, {\n    style: styles.loginBox,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 11\n    }\n  }, React.createElement(SafeAreaView, {\n    style: {\n      left: 45\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }\n  }, React.createElement(Button, {\n    style: styles.submitButton,\n    title: \"Register\",\n    color: \"#FB2B60\",\n    onPress: function onPress() {\n      navigation.navigate(\"Register\");\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 15\n    }\n  })), React.createElement(Center, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 13\n    }\n  }, React.createElement(TextInput, {\n    style: styles.input,\n    onChangeText: function onChangeText(em) {\n      return setEmail(em);\n    },\n    placeholder: \"Email\",\n    value: email,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 15\n    }\n  }), React.createElement(TextInput, {\n    style: styles.input,\n    onChangeText: function onChangeText(pw) {\n      return setPassword(pw);\n    },\n    placeholder: \"Password\",\n    value: pass,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 15\n    }\n  }))), React.createElement(SafeAreaView, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 11\n    }\n  }, React.createElement(Button, {\n    style: styles.submitButton,\n    color: \"#FB2B60\",\n    title: \"Login\",\n    onPress: function onPress() {\n      doLogin;\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }\n  }), React.createElement(Text, {\n    style: styles.medium,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }\n  }, \"Forgot Password? Click here.\")));\n}\n\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    justifyContent: \"space-between\",\n    padding: 20,\n    margin: 10\n  },\n  input: {\n    margin: 1,\n    height: 40,\n    width: 150,\n    backgroundColor: 'white',\n    borderColor: 'white',\n    borderWidth: 1\n  },\n  submitButton: {\n    backgroundColor: '#7a42f4',\n    padding: 10,\n    margin: 25,\n    height: 40\n  },\n  submitButtonText: {\n    color: 'white'\n  },\n  large: {\n    fontSize: 28\n  },\n  medium: {\n    fontSize: 20\n  },\n  backgroundImage: {\n    flex: 1,\n    resizeMode: 'cover'\n  },\n  loginBox: {\n    flex: 0.3,\n    backgroundColor: \"#19c0ff\",\n    width: 250,\n    borderWidth: 2,\n    borderTopLeftRadius: 20,\n    borderTopRightRadius: 20,\n    borderBottomLeftRadius: 20,\n    borderBottomRightRadius: 20,\n    margin: 10,\n    alignItems: 'center',\n    paddingTop: 10\n  }\n});","map":{"version":3,"sources":["/home/joeyg/Desktop/mobile-app/budgetbuddy-mobileapp/src/components/Login.js"],"names":["React","useState","useContext","Center","AuthContext","buildPath","Login","navigation","loginEmail","setEmail","loginPassword","setPassword","message","showAlert","setAlert","doLogin","event","preventDefault","obj","email","value","password","js","JSON","stringify","fetch","method","body","headers","response","text","res","parse","error","localStorage","setItem","id","Alert","alert","toString","styles","backgroundImage","require","loginBox","left","submitButton","navigate","input","em","pw","pass","medium","StyleSheet","create","container","flex","justifyContent","padding","margin","height","width","backgroundColor","borderColor","borderWidth","submitButtonText","color","large","fontSize","resizeMode","borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius","alignItems","paddingTop"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from 'react';\nimport { TextInput, Button, Alert, Text, SafeAreaView, ImageBackground, StyleSheet } from 'react-native';\nimport { Center } from '../components/Center';\nimport { AuthContext } from \"./AuthProvider\";\n//import { Card } from 'react-native-paper';\nimport { buildPath } from '../functions/BuildPath';\n\nfunction Login({ navigation }) {\n    //const { loginEmail, loginPassword } = useContext(AuthContext);\n    const [loginEmail, setEmail] = React.useState('');\n    const [loginPassword, setPassword] = React.useState('');\n    //var loginEmail;\n    //var loginPassword;\n\n    var message = '';\n\n    const [ showAlert, setAlert ] = useState(false);\n\n    const doLogin = async event => {\n        event.preventDefault();\n\n        var obj = {email:loginEmail.value, password:loginPassword.value};\n        var js = JSON.stringify(obj);\n        try\n        {\n            // API call\n            const response = await fetch(buildPath('api/login'),\n                {method:'POST',body:js,headers:{'Content-Type': 'application/json'}});\n\n            // Parse JSON response\n            var res = JSON.parse(await response.text());\n\n            if( res.error != '')\n            {\n                message = 'Email/Password combination incorrect';\n                setAlert(true);\n            }\n            else\n            {\n                localStorage.setItem('email', loginEmail.value);\n                localStorage.setItem('userID', res.id);\n                // re-route\n                //window.location.href = '/budget';\n            }\n        }\n        catch(e)\n        {\n            Alert.alert(e.toString);\n            return;\n        }\n    };\n\n    return (\n        <ImageBackground \n        style={styles.backgroundImage} \n        source={require('../../assets/bubblebackground.png')}>\n          <SafeAreaView style={styles.loginBox}>\n            <SafeAreaView style={{left: 45}}>\n              <Button style={styles.submitButton}\n                title=\"Register\"\n                color=\"#FB2B60\"\n                onPress={() => {\n                  navigation.navigate(\"Register\");\n                }}/>\n            </SafeAreaView>\n            <Center>\n              <TextInput style={styles.input}\n                onChangeText={em => setEmail(em)}\n                placeholder=\"Email\"\n                value={email}>\n              </TextInput>\n              <TextInput style={styles.input}\n                onChangeText={pw => setPassword(pw)}\n                placeholder=\"Password\"\n                value={pass}>\n              </TextInput>\n            </Center>\n          </SafeAreaView>\n          <SafeAreaView>\n            <Button style={styles.submitButton}\n              color=\"#FB2B60\"\n              title=\"Login\"\n              onPress={() => {doLogin}}/>\n            <Text style={styles.medium}>Forgot Password? Click here.</Text>\n          </SafeAreaView>\n        </ImageBackground>\n      );\n    }\n\nconst styles = StyleSheet.create({\n    container: {\n      flex: 1,\n      justifyContent: \"space-between\",\n      padding: 20,\n      margin: 10,\n    },\n    input: {\n      margin: 1,\n      height: 40,\n      width: 150,\n      backgroundColor: 'white',\n      borderColor: 'white',\n      borderWidth: 1,\n    },\n    submitButton: {\n      backgroundColor: '#7a42f4',\n      padding: 10,\n      margin: 25,\n      height: 40,\n    },\n    submitButtonText: {\n      color: 'white'\n    },\n    large: {\n      fontSize: 28\n    },\n    medium: {\n      fontSize: 20\n    },\n    backgroundImage: {\n      flex: 1,\n      resizeMode: 'cover',\n    }, \n    loginBox: {\n      flex: 0.3,\n      backgroundColor: \"#19c0ff\",\n      width: 250,\n      borderWidth: 2,\n      borderTopLeftRadius: 20,\n      borderTopRightRadius: 20,\n      borderBottomLeftRadius: 20,\n      borderBottomRightRadius: 20,\n      margin: 10,\n      alignItems: 'center',\n      paddingTop: 10\n  },\n  });"]},"metadata":{},"sourceType":"module"}